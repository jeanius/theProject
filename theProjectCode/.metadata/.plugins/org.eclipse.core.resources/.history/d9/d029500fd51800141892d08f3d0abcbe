package com.jeanpower.reggieproject;

import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;

import android.app.Activity;
import android.app.Dialog;
import android.content.Context;
import android.content.ContextWrapper;
import android.os.Environment;
import android.util.Log;
import android.widget.Toast;
import ar.com.daidalos.afiledialog.FileChooserDialog;
import ar.com.daidalos.afiledialog.FileChooserLabels;

public class SaveLoad{
	
	Game game;
	Context context;
	
	public SaveLoad(Context c, Game g){
		context = c;
		game = g;
	}
	
	public void saveLoad(){
		
		  FileChooserDialog dialog = new FileChooserDialog(context);
		    dialog.setCanCreateFiles(true);
		    dialog.setFilter(".*txt");
		    dialog.setShowFullPath(true);
		    dialog.loadFolder(Environment.getExternalStorageDirectory() + "/Documents/");
		    FileChooserLabels labels = new FileChooserLabels();
		    labels.createFileDialogTitle = "Save Game";
		    labels.createFileDialogMessage = "Enter game name";
		    labels.labelAddButton = "Navigate to file or click here to save current game";
		    dialog.setLabels(labels);
		    dialog.addListener(new FileChooserDialog.OnFileSelectedListener() {
		    	
		         public void onFileSelected(Dialog source, File file) {
		             source.hide();
		             Toast toast = Toast.makeText(source.getContext(), "File selected: " + file.getName(), Toast.LENGTH_LONG);
		             toast.show();
		         }
		         public void onFileSelected(Dialog source, File folder, String name) {
		             source.hide();
		             String filename = name + ".txt";
		             File output = new File(folder, filename);
		             FileOutputStream fw = null;
		             
		             try {
		            	 fw = new FileOutputStream(output);
		            	 byte[] filedata = filename.getBytes();
		            	 fw.write(filedata);
		                 fw.close();
		             }
		             catch (Exception e){
		            	 Log.d("exception", e +"");
		             }
		             
		             if (null != fw){
		             Toast toast = Toast.makeText(source.getContext(), "File created: " + folder.getName() + "/" + name, Toast.LENGTH_SHORT);
		             toast.show();
		             }
		             
		             if (null == fw){
		             Toast toast = Toast.makeText(source.getContext(), "You need to save to a storage folder, like 'Documents'", Toast.LENGTH_LONG);
		             toast.show();
		             }
		         }
		     });
		    
		    dialog.show();
		
	}
	
	public void load(){
		
	}
	
	public String createGameText(){
		
		String gameText;
		
		return null;
		
	}
	
	public String loadGame(){
		
		String gameText;
		
		return null;
		
	}
}
